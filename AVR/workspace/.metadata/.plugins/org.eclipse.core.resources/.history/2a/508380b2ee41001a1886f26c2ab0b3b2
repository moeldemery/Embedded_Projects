/*
 * ADC.c
 *
 *  Created on: 28 Jan 2020
 *      Author: Mohamed
 */

#include "../INC/ADC.h"

TMR_config_t TMR_groups={	ADC_EN , ADC_AVCC , ADC_AUTO_TRIG	,ADC_LEFT_ADJ , ADC_CH_0  , ADC_PRE_64};

void ADC_Init(void)
{
    ADCSRA |= (1<<ADEN);//ADEN enabled

    ADCSRA |=  (1<<ADPS2);
    ADCSRA |=  (1<<ADPS1);
    ADCSRA &= ~(1<<ADPS0); ;//division factor 110 =  /64

    ADMUX &= ~(1<<REFS1);
    ADMUX |=  (1<<REFS0); //REFS[1:0] = 01 AVcc

    ADMUX |=  (1<<ADLAR); //ADLAR left based

    ADMUX &= ~(1<<MUX4);
    ADMUX &= ~(1<<MUX3);
    ADMUX &= ~(1<<MUX2);
    ADMUX &= ~(1<<MUX1);
    ADMUX &= ~(1<<MUX0); //00000 = ADC0

    ADCSRA |= (1<<7); //ADEN enabled


    ADCSRA |= (1<<2);
    ADCSRA |= (1<<1);
    ADCSRA &= ~(1<<0); //division factor 110 =  /64


    ADMUX &= ~(1<<7);
    ADMUX |= (1<<6); //REFS[1:0] = 01 AVcc

    ADMUX |= (1<<5); //ADLAR left based

    ADMUX &= ~(1<<4);
    ADMUX &= ~(1<<3);
    ADMUX &= ~(1<<2);
    ADMUX &= ~(1<<1);
    ADMUX &= ~(1<<0); //00000 = ADC0

}
