/*
 * main.c
 *
 *  Created on: Feb 10, 2020
 *      Author: DELL
 */


#include "STD_TYPES.h"
#include "BIT_MATH.h"

#include "DIO_interface.h"
#include "RCC_interface.h"
#include "SysTick_interface.h"
#include "NVIC_interface.h"

/*Applications:
 * 1- Blinking_LED
 * 2- All_LEDs_On
 * 3- Delay_ms and us
 */

#if 0	// Blinking_LED
/*Blinking LED Application*/
int main(void)
{
	RCC_SystemCLKInit();
							//(2> APB2 Bus & 4> IOPCEN to enable clock on DIO PortC)
	RCC_voidEnableClock(2,4);	// I/O port C clock enable [RCC_APB2ENR_IOPCEN] > Page 145

	DIO_enuSetPinMode(DIO_u8_PIN32 , DIO_u8_OUTPUT_2M_PP);

	while(1)
	{
		DIO_enuSetPinValue(DIO_u8_PIN32 , DIO_u8_HIGH);
		DIO_enuSetPinValue(DIO_u8_PIN32 , DIO_u8_LOW);
	}
}
/************************************************************************************/
/************************************************************************************/

#elif 0	// All_LEDs_On
int main (void)
{
	RCC_SystemCLKInit();

	RCC_voidEnableClock(2,2);	//page 145
	RCC_voidEnableClock(2,3);
	RCC_voidEnableClock(2,4);

	DIO_enuSetPinMode(DIO_u8_PIN32 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN31 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN30 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN29 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN28 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN27 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN26 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN25 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN24 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN23 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN22 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN21 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN20 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN19 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN18 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN17 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN16 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN15 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN14 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN13 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN12 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN11 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN10 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN9 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN8 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN7 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN6 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN5 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN4 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN3 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN2 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN1 , DIO_u8_OUTPUT_2M_PP);
	DIO_enuSetPinMode(DIO_u8_PIN0 , DIO_u8_OUTPUT_2M_PP);

	while(1)
		{
			DIO_enuSetPinValue(DIO_u8_PIN32 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN31 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN30 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN29 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN28 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN27 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN26 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN25 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN24 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN23 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN22 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN21 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN20 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN19 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN18 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN17 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN16 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN15 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN14 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN13 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN12 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN11 , DIO_u8_HIGH);

			DIO_enuSetPinValue(DIO_u8_PIN10 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN9 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN8 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN7 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN6 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN5 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN4 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN3 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN2 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN1 , DIO_u8_HIGH);
			DIO_enuSetPinValue(DIO_u8_PIN0 , DIO_u8_HIGH);
		}
}
/************************************************************************************/
/************************************************************************************/
#elif 0	// Delay_ms and us

int main (void)
{
	RCC_SystemCLKInit();

	RCC_voidEnableClock(2,2);	//page 145
	RCC_voidEnableClock(2,3);
	RCC_voidEnableClock(2,4);
}
/************************************************************************************/
/************************************************************************************/
#elif 0	// Delay_ms and us

void ledToggle(void);

/*Blinking LED Application*/
int main(void)
{
	RCC_SystemCLKInit();
							//(2> APB2 Bus & 4> IOPCEN to enable clock on DIO PortC)
	RCC_enueripheralCLKState(RCC_GPIOC_PERIPHERAL,1);	// I/O port C clock enable [RCC_APB2ENR_IOPCEN] > Page 145

	DIO_enuSetPinMode(DIO_u8_PIN32 , DIO_u8_OUTPUT_2M_PP);//DIO_Initialization

	STK_voidInit();
	STK_voidStart(1000000); // Set Timer to 1 sec
	STK_voidSetCallBack(ledToggle);


	while(1)
	{

	}
}

/************************************************************************************/
/************************************************************************************/
#elif 1	// NVIC
/*Blinking LED Application*/

int main(void)
{
	RCC_SystemCLKInit();
															//(2> APB2 Bus & 4> IOPCEN to enable clock on DIO PortC)
	RCC_enueripheralCLKState(RCC_GPIOC_PERIPHERAL,1);		// I/O port C clock enable [RCC_APB2ENR_IOPCEN] > Page 145
	RCC_enueripheralCLKState(RCC_GPIOA_PERIPHERAL,1);

	//DIO_enuSetPinMode(DIO_u8_PIN32 , DIO_u8_OUTPUT_2M_PP);	//DIO_Initialization
	DIO_enuSetPinMode(DIO_u8_PIN0  , DIO_u8_OUTPUT_2M_PP);	//DIO_Initialization
	DIO_enuSetPinMode(DIO_u8_PIN1  , DIO_u8_OUTPUT_2M_PP);	//DIO_Initialization

	NVIC_Initialization();


	NVIC_voidEnableInt(38);


	NVIC_voidSetPendingFlag(38);

	while(1)
	{
		//DIO_enuSetPinValue(DIO_u8_PIN32 , DIO_u8_LOW);
	}
}

void USART1_IRQHandler(void)
{
	DIO_enuSetPinValue(DIO_u8_PIN1 , DIO_u8_HIGH);NVIC_voidEnableInt(37);
	while(1)
	{

	}
}

void USART2_IRQHandler(void)
{
	DIO_enuSetPinValue(DIO_u8_PIN0 , DIO_u8_HIGH);
}


#endif
